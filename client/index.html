<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <title>Tic Tac Toe</title>
</head>
<body>
  <div class="background">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="menu-container">
    <div class="menu">
      <div class="avatar-container">
        <img class="avatar-image" src="" alt="Avatar" style="display:none;">
      </div>
      <input type="number" class="bet-amount-input" placeholder="Place bet in: $MATIC" step="0.0001" min="0.0001" style="display:none;">
      <button class="button connect-wallet-button">
        <span class="icon">ü¶ä</span> Connect Wallet
      </button>
      <button class="button start-button" style="display:none;">
        <span class="icon">üéÆ</span> Play vs Player
      </button>
      <button class="button play-ai-button" disabled style="display:none;">
        <span class="icon">ü§ñ</span> Play vs AI - (NotWorking)
      </button>
      <button class="button rules-button rules-width" style="display:none;">
        <span class="icon">üìò</span> Rules
      </button>
      <button class="button settings-button settings-width">
          <span class="icon">‚öôÔ∏è</span> Settings
      </button>
      <div class="xp-bar-container" style="display: none;">
          <label for="xp-bar">Rank: <span class="rank-name">Beginner</span></label>
          <progress id="xp-bar" value="0" max="100"></progress>
          <span class="xp-text">0/100 XP</span>
      </div>
      <div class="game-list"></div>
      <footer class="footer" style="display: none;">
        <div class="footer-text">
          ¬© 2024 BlockMagic Hackathon: "OnChainTTT".<br>
          Created & Compiled by Ambientiumim and RuffBuff.
        </div>
        <div class="social-icons">
          <a href="https://github.com/Ambientiumim" target="_blank"><i class="fab fa-github"></i></a>
          <a href="https://x.com/Ambientiumim" target="_blank"><i class="fab fa-twitter"></i></a>
          <a href="https://t.me/ambientium" target="_blank"><i class="fab fa-telegram-plane"></i></a>
          <a href="https://github.com/ruffbuff" target="_blank"><i class="fab fa-github"></i></a>
          <a href="https://x.com/RuffBuff_" target="_blank"><i class="fab fa-twitter"></i></a>
          <a href="https://t.me/ruffbuff" target="_blank"><i class="fab fa-telegram-plane"></i></a>
        </div>
      </footer>
    </div>
  </div>
  <div class="message"></div>
  <div class="board">
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
  </div>
  <div class="avatars-board" style="display:none;">
    <div class="player-avatar">
      <img class="player-avatar-image" src="" alt="Player Avatar">
    </div>
  </div>
  <div class="modal">
    <div class="modal-content">
      <div class="modal-message"></div>
      <button class="button restart-button" id="restart-button">Return to Menu (30)</button>
    </div>
  </div>
  <div class="modal avatar-modal" style="display: none;">
    <div class="modal-content">
      <span class="close-button">X</span>
      <div class="modal-message">Choose your avatar</div>
      <input type="file" class="avatar-input" accept="image/*">
      <button class="button save-avatar-button">Save</button>
    </div>
  </div>
  <div class="modal modal-ai">
      <div class="modal-content">
          <div class="modal-message modal-message-ai"></div>
          <button class="button restart-button restart-button-ai">Return to Menu (30)</button>
      </div>
  </div>
  <div class="modal rules-modal scrollable" style="display: none;">
      <div class="modal-content">
          <span class="close-button">X</span>
          <div class="modal-message">Game Rules</div>
          <div class="video-container">
              <video controls>
                <source src="test.mp4" type="video/mp4">
                  Your browser does not support the video tag.
              </video>
          </div>
          <div class="rules-text">
              <h2>Welcome to OnChain Tic Tac Toe!</h2>
              <p><strong>Objective:</strong> The goal is simple: be the first to get three of your marks in a row (horizontally, vertically, or diagonally).</p>
              
              <h3>Starting the Game:</h3>
              <ul>
                  <li>Each match begins with two players, where one player is randomly assigned 'X' and the other 'O'.</li>
                  <li>The player who is assigned 'X' will make the first move.</li>
              </ul>
              
              <h3>Gameplay Rules:</h3>
              <ul>
                  <li>Players will alternate turns, placing their respective marks ('X' or 'O') in the empty squares.</li>
                  <li>The first player to line up three of their marks in a vertical, horizontal, or diagonal row wins the game.</li>
              </ul>

              <h3>If a Player Disconnects:</h3>
              <p>If you disconnect during a game, it will count as a forfeiture, resulting in an automatic loss. The game will automatically award the victory to the connected player.</p>
              
              <h3>Handling Draws:</h3>
              <p>A match is considered a draw if all cells are filled and no player has successfully aligned three marks. In the event of a draw, the bet is returned to both players, excluding transaction fees (gas).</p>
              
              <h3>Important Notes:</h3>
              <ul>
                  <li>If a game does not conclude naturally (due to a disconnection or other issues), you may need to invoke the <code>publicRequestGameResult</code> to force a check on the game status and process the outcome appropriately.</li>
                  <li>It's advisable to cancel any games you create if you wish to exit or are unable to continue playing, to avoid locking up the game for other players.</li>
                  <li>Remember to manage your open games responsibly to ensure a smooth gaming experience for everyone.</li>
              </ul>
              
              <h3>Dispute Resolution:</h3>
              <p>In cases of technical difficulties affecting game outcomes, players can contact support for resolution. However, the smart contract's automatic mechanisms typically handle most common issues directly on the blockchain.</p>
              
              <p>Enjoy your game, play fair, and may the best player win!</p>
          </div>
      </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
  <script type="module" src="./script.js"></script>
</body>
</html>
